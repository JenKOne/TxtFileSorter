# TxtFileSorter
## Описание
Консольная утилита для фильтрации содержимого текстовых файлов.
Разделяет целые числа, вещественные числа и строки в разные выходные файлы
и выводит статистику в консоль.
## Стек
Java 17
Maven 3.8
## Сборка
Осуществляется в Bush.
- открываем bush в директории, в которой находится проект
- запускаем команду mvn clean package
## Руководство
### Запуск
Осуществляется командой java -jar target/txt-filter-util-1.0.jar [опции] [файлы]
### Опции:
- -s — краткая статистика
- -f — полная статистика
- -a — добавление в файлы (если результирующие/выходящие файлы нужно дополнять, а не перезаписывать)
- -o <dir> — каталог вывода (после этой опции необходимо указать директорию создания выходящих файлов)
- -p <prefix> — префикс имён файлов (после этой опции необходимо указать префикс выходящих файлов)
### Файлы:
Файлы должны находиться в той же директории, что и jar-файл и иметь расширение .txt
### Пример:
java -jar target/file-filter-util-1.0.jar -f -p test- in1.txt in2.txt
## Логика выполнения программы
точка входа App.main() ->
разбор аргументов командной строки arguments = new ArgumentParser().parse(args) (выполнение программы останавливается при отлове исключения) ->
инициализация классификатора и трёх независимых буферов для статистики ->
цикл по входящим данным -> проверка существования файла if (!Files.exists(inputFile)) (если файл не найден, то переходим к следующему файлу) -> чтение файла построчно List<String> lines = Files.readAllLines(inputFile) - классификация каждого элемента списка classifier.classify(line) -> внутри LineClassifier вызывается метод classify с передачей на обработку строки line, где эта строка проверяется на её сущность (целое число/вещественное/строка) и присваивается DataType. Из метода возвращается ClassificationResult(Datatype.TYPE, value) -> конструкция switch/case обрабатывает результаты классификации и заполняет буферы статистик ->
переход к следующему файлу ->
когда все файлы обработаны вызывается xtFileWriter writer = new TxtFileWriter(...), который получает директорию, префикс и булевое значение(дозапись/перезапись) ->
метод writeIfNotEmpty класса TxtFileWriter -> выполняет проверку списка(если он пуст, то файл не создаётся) -> формирует путь создания файла из префикса, имени и расширения .txt -> проверяет appendMode (если true, то файл дописывается, если false, то перезаписывается) -> записывает файл (Важно! используется кодировка UTF_8, сообщения в Bush будут как белиберда в этой кодировке, для корректного отображения сообщений об ошибках необходимо в команде явно указать кодировку) ->
вывод статистики GeneralStatistics.print.
### Источники:
- "Java - решение практических задач" - Анджел Леонард
- "Java для чайников" - Барри Берд
- https://ru.stackoverflow.com/
